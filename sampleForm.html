{% extends "_layout" %}

{% set form = craft.formBuilder.getFormByHandle('contactForm') %}
{% set tabs = form.fieldLayout.getFieldLayout().getTabs() %}

{% import '_includes/forms.twig' as forms %}

{% block content %}

<div class="container">

{# Error handling #}
{% if craft.session.hasFlash('error') %}
  <div class="errors">
  {% for error in craft.session.getFlash('error').required %}
    <p class="error">{{ error }}</p>
  {% endfor %}
  </div>
{% endif %}

{# Notice handling #}
{% if craft.session.hasFlash('notice') %}
  <p class="notice">{{ craft.session.getFlash('notice') | raw }}</p>
{% endif %}

{# Success handling #}
{% if craft.session.hasFlash('success') %}
  <p class="success">{{ craft.session.getFlash('success') | raw }}</p>
{% endif %}

<form method="post" accept-charset="utf-8">
  <input type="hidden" name="action" value="formBuilder/entries/saveFormEntry">
  <input type="hidden" name="redirect" value="/">
  <input type="hidden" name="formHandle" value="{{form.handle}}">
  <input type="hidden" name="formHoneypot" value="">
  

  {% for tab in tabs %}
    {% set fields = tab.getFields() %}
    
    <fieldset class="{{loop.index}}">
      <legend>{{ tab.name }}</legend>

      {% for field in fields %}

        {# {{ field | inspect }} #}

        {# {%
          set param = {  
            label: f.name,  
            labelClass: f.handle,  
            size: attribute(f.settings, 'maxLength') is defined ? f.settings['maxLength'] : '',  
            placeholder: attribute(f.settings, 'placeholder') is defined ? f.settings['placeholder'] : '',  
            description: f.instructions,
            fieldid: f.handle,
            value: '',
            required: field.required
          }  
        %}
        {{ forms.input('name', f.type, param) }}  #}
        



        {% include "_fields/field.twig" with {
          field: craft.fields.getFieldById(field.fieldId),
          required: field.required,
        } only %}





      {% endfor %} 

    </fieldset>

  {% endfor %}


  <button type="submit">
    Submit Message
  </button>

</form>

</div>
{% endblock %}